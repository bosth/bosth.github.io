<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Leaving Earth is a Constraint Satisfaction Problem &#183; jaxartes.net</title><meta name=title content="Leaving Earth is a Constraint Satisfaction Problem &#183; jaxartes.net"><link rel=canonical href=https://bosth.github.io/pages/leaving-earth/><link type=text/css rel=stylesheet href=/css/main.bundle.min.3cd61ceeaea9b22fa712411c6a3a593983e37ab6eafa947b7b52180e7ec5d0f1bae90f5880cb8927c948385043db7e7ed6bd034440dfe3c2d0af060e387865c7.css integrity="sha512-PNYc7q6psi+nEkEcajpZOYPjerbq+pR7e1IYDn7F0PG66Q9YgMuJJ8lIOFBD235+1r0DREDf48LQrwYOOHhlxw=="><script type=text/javascript src=/js/main.min.cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e.js integrity="sha512-z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg=="></script>
<script type=text/javascript src=/js/appearance.min.f94f4c4636d9e3ec8f5ee53cdc8ffa3d01bf87cd92ac85e6797550b1e2b80dc9118d838f3eb24c55109352455e72ff082dfe560283154e5a8f87fd75107b59c4.js integrity="sha512-+U9MRjbZ4+yPXuU83I/6PQG/h82SrIXmeXVQseK4DckRjYOPPrJMVRCTUkVecv8ILf5WAoMVTlqPh/11EHtZxA=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.3ddcf04f5b0d4c32f72e726d3c12eebccd8c3c9f9daa9a13414808895de0ae1e1cdddda6849680d5bd96dbb60d0b1e0b24c29f5c83e5631e55e7e6bc02015490.js integrity="sha512-PdzwT1sNTDL3LnJtPBLuvM2MPJ+dqpoTQUgIiV3grh4c3d2mhJaA1b2W27YNCx4LJMKfXIPlYx5V5+a8AgFUkA==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Leaving Earth is a Constraint Satisfaction Problem"><meta property="og:description" content="I want to show that mission-planning in Leaving Earth is just one big constraint satisfaction problem.
Leaving Earth?> Leaving Earth? # Leaving Earth is a independently-produced board game with lovely art that recreates a space race similar to the one between the USSR and the USA."><meta property="og:type" content="article"><meta property="og:url" content="https://bosth.github.io/pages/leaving-earth/"><meta property="og:image" content="https://bosth.github.io/pages/leaving-earth/featured.webp"><meta property="article:section" content="pages"><meta property="og:site_name" content="jaxartes.net"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bosth.github.io/pages/leaving-earth/featured.webp"><meta name=twitter:title content="Leaving Earth is a Constraint Satisfaction Problem"><meta name=twitter:description content="I want to show that mission-planning in Leaving Earth is just one big constraint satisfaction problem.
Leaving Earth?> Leaving Earth? # Leaving Earth is a independently-produced board game with lovely art that recreates a space race similar to the one between the USSR and the USA."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Pages","name":"Leaving Earth is a Constraint Satisfaction Problem","headline":"Leaving Earth is a Constraint Satisfaction Problem","abstract":"I want to show that mission-planning in Leaving Earth is just one big constraint satisfaction problem.\nLeaving Earth?\u003e Leaving Earth? # Leaving Earth is a independently-produced board game with lovely art that recreates a space race similar to the one between the USSR and the USA.","inLanguage":"en","url":"https:\/\/bosth.github.io\/pages\/leaving-earth\/","author":{"@type":"Person","name":"Benjamin Trigona-Harany"},"keywords":["boardgames","csp","z3","python"],"mainEntityOfPage":"true","wordCount":"3025"}]</script><meta name=author content="Benjamin Trigona-Harany"><link href=https://www.jaxartes.net/ rel=me><link href=mailto:info@jaxartes.net rel=me><link href=https://github.com/bosth rel=me><link href=https://linkedin.com/in/benth rel=me><link href=https://mapstodon.space/@jerseybastion rel=me><link href="https://www.worldcat.org/search?q=Benjamin+Trigona+Harany" rel=me><script defer type=text/javascript src=/js/mermaid.bundle.66a545800d6962b947d817782c058ce6d53b93549acc98279463551b5616640c827252f204c7d93e779dd0b0cb31dd82bbb9eb46103e2ac159ffb596cf27dfe5.js integrity="sha512-ZqVFgA1pYrlH2Bd4LAWM5tU7k1SazJgnlGNVG1YWZAyCclLyBMfZPned0LDLMd2Cu7nrRhA+KsFZ/7WWzyff5Q=="></script>
<script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//matomo.jaxartes.net/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script><noscript><p><img src="//matomo.jaxartes.net/matomo.php?idsite=1&rec=1" style=border:0 alt></p></noscript></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">jaxartes.net</a></nav><div class="hidden md:flex items-center space-x-5 md:ml-12"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=jaxartes.net>Home</a>
<a href=/pages/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Pages>Pages</a>
<button id=search-button class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10"><li class=mb-1><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mb-1><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/ title=jaxartes.net><span class="inline-block align-text-bottom"></span>Home</a></li><li class=mb-1><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/pages/ title=Pages><span class="inline-block align-text-bottom"></span>Pages</a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/pages/leaving-earth/featured_hu63478c6181a4c38833ba2ff8c888b803_39480_1200x0_resize_q75_h2_box_2.webp)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-70 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Leaving Earth is a Constraint Satisfaction Problem</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#leaving-earth>Leaving Earth?</a><ul><li><a href=#mission-planning>Mission Planning</a></li></ul></li></ul><ul><li><a href=#z3>z3</a><ul><li><a href=#solving-a-single-maneuver>Solving a single maneuver</a></li><li><a href=#solving-longer-missions>Solving longer missions</a></li><li><a href=#ion-thrusters>Ion Thrusters</a></li></ul></li><li><a href=#leaving-earth-solver>Leaving Earth Solver</a><ul><li><a href=#examples>Examples</a></li><li><a href=#how-it-works>How it works</a></li></ul></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#leaving-earth>Leaving Earth?</a><ul><li><a href=#mission-planning>Mission Planning</a></li></ul></li></ul><ul><li><a href=#z3>z3</a><ul><li><a href=#solving-a-single-maneuver>Solving a single maneuver</a></li><li><a href=#solving-longer-missions>Solving longer missions</a></li><li><a href=#ion-thrusters>Ion Thrusters</a></li></ul></li><li><a href=#leaving-earth-solver>Leaving Earth Solver</a><ul><li><a href=#examples>Examples</a></li><li><a href=#how-it-works>How it works</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>I want to show that mission-planning in Leaving Earth is just one big constraint satisfaction problem.</p><div id=leaving-earth class=anchor>Leaving Earth?></div><h2 class="relative group">Leaving Earth?
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#leaving-earth aria-label=Anchor>#</a></span></h2><p>Leaving Earth is a independently-produced board game with lovely art that recreates a space race similar to the one between the USSR and the USA. At the start of the game, a handful of missions will be revealed and the players compete to be the first to complete each one, scoring points based on their complexity. Many of these missions are examples of actual human accomplishments - such as <em>Venus Lander</em> - while others - <em>Mars Station</em> - are more fanciful.</p><figure><img class="my-0 rounded-md" srcset="/pages/leaving-earth/mission_sample_hu268ac2b7343b9b3a58b28cb1143855a7_379021_330x0_resize_q75_h2_box_2.webp 330w,
/pages/leaving-earth/mission_sample_hu268ac2b7343b9b3a58b28cb1143855a7_379021_660x0_resize_q75_h2_box_2.webp 660w,
/pages/leaving-earth/mission_sample_hu268ac2b7343b9b3a58b28cb1143855a7_379021_1024x0_resize_q75_h2_box_2.webp 1024w,
/pages/leaving-earth/mission_sample_hu268ac2b7343b9b3a58b28cb1143855a7_379021_1320x0_resize_q75_h2_box_2.webp 2x" src=/pages/leaving-earth/mission_sample_hu268ac2b7343b9b3a58b28cb1143855a7_379021_660x0_resize_q75_h2_box_2.webp alt><figcaption>Easy missions in Leaving Earth</figcaption></figure><figure><img class="my-0 rounded-md" srcset="/pages/leaving-earth/mission_list_hua51d8195a25f2ecb1dd2d7efefce6264_51954_330x0_resize_q75_h2_box_2.webp 330w,
/pages/leaving-earth/mission_list_hua51d8195a25f2ecb1dd2d7efefce6264_51954_660x0_resize_q75_h2_box_2.webp 660w,
/pages/leaving-earth/mission_list_hua51d8195a25f2ecb1dd2d7efefce6264_51954_1024x0_resize_q75_h2_box_2.webp 1024w,
/pages/leaving-earth/mission_list_hua51d8195a25f2ecb1dd2d7efefce6264_51954_1320x0_resize_q75_h2_box_2.webp 2x" src=/pages/leaving-earth/mission_list_hua51d8195a25f2ecb1dd2d7efefce6264_51954_660x0_resize_q75_h2_box_2.webp alt><figcaption>In real life, the United States would have just edged the Soviet Union 43 points to 42</figcaption></figure><div id=mission-planning class=anchor>Mission Planning></div><h3 class="relative group">Mission Planning
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#mission-planning aria-label=Anchor>#</a></span></h3><p>The core mechanic in Leaving Earth is planning the missions using a variety of rockets, capsules and other components to perform a series of maneuvers from one location to another.</p><figure><img class="my-0 rounded-md" srcset="/pages/leaving-earth/lunarorbit_hud7a62983ec18ab275d742c3279e38da1_161246_330x0_resize_q75_box.jpg 330w,
/pages/leaving-earth/lunarorbit_hud7a62983ec18ab275d742c3279e38da1_161246_660x0_resize_q75_box.jpg 660w,
/pages/leaving-earth/lunarorbit_hud7a62983ec18ab275d742c3279e38da1_161246_1024x0_resize_q75_box.jpg 1024w,
/pages/leaving-earth/lunarorbit_hud7a62983ec18ab275d742c3279e38da1_161246_1320x0_resize_q75_box.jpg 2x" src=/pages/leaving-earth/lunarorbit_hud7a62983ec18ab275d742c3279e38da1_161246_660x0_resize_q75_box.jpg alt><figcaption>From a Lunar orbit, a spacecraft may land on the Moon or fly back to an Earth Orbit</figcaption></figure><p>The key concept is that each maneuver has a difficulty - roughly approximating <a href=https://en.wikipedia.org/wiki/Delta-v target=_blank>Delta-<em>v</em></a> - and each rocket can produce a certain amount of thrust. The amount of thrust required to perform a maneuver is based on this simple formula: <em>thrust required = mass × difficulty</em>. The final factor, mass, is determined by the number of components aboard the spacecraft.</p><p>A simple mission plan for a spacecraft travelling from Earth to the Lunar surface might look like the following (the numbers in parentheses indicates the mass of that component):</p><table><thead><tr><th>Maneuver</th><th>Difficulty</th><th>Rockets Used</th><th>Payload</th><th>Required Thrust</th></tr></thead><tbody><tr><td>Earth to Earth Orbit</td><td>8</td><td>Saturn (20)</td><td>Atlas (4), Juno (1), Probe (1)</td><td>26 × 8</td></tr><tr><td>Earth Orbit to Lunar Orbit</td><td>3</td><td>Atlas (4)</td><td>Juno (1), Probe (1)</td><td>6 × 8</td></tr><tr><td>Lunar Orbit to Moon</td><td>2</td><td>Juno (1)</td><td>Probe (1)</td><td>2 × 2</td></tr></tbody></table><p>As long as the rockets used in each stage of this mission can product the required thrust, then the maneuver can be completed. In the example above, a Saturn rocket produces 200 thrust, an Atlas 27 thrust and a Juno 4, so each maneuver succeeds.</p><p>An alternative route to space would be to use a two-stage launch to avoid the difficulty 8 maneuver required to go directly from the Earth&rsquo;s surface to Earth Orbit.</p><table><thead><tr><th>Maneuver</th><th>Difficulty</th><th>Rockets Used</th><th>Payload</th><th>Required Thrust</th></tr></thead><tbody><tr><td>Earth to Suborbital Flight</td><td>3</td><td>Soyuz (9)</td><td>Soyuz (9), Atlas (4), Juno (1), Probe (1)</td><td>24 × 3</td></tr><tr><td>Suborbital Flight to Earth Orbit</td><td>5</td><td>Soyuz (9)</td><td>Atlas (4), Juno (1), Probe (1)</td><td>15 × 5</td></tr><tr><td>Earth Orbit to Lunar Orbit</td><td>3</td><td>Atlas (4)</td><td>Juno (1), Probe (1)</td><td>6 × 8</td></tr><tr><td>Lunar Orbit to Moon</td><td>2</td><td>Juno (1)</td><td>Probe (1)</td><td>2 × 2</td></tr></tbody></table><p>A Soyuz produces only 80 thrust, but using it in a two-stage configuration means that it can still reach orbit. In fact, two Soyuz rockets can carry a payload of 7 mass into orbit, whereas a single Saturn can only carry 5. And since in the game&rsquo;s economy a Soyuz only costs $8 compared to a hefty $15 for a Saturn, the former starts to look like an attractive proposition. That is until you start planning, say, a mission to transport humans to Mars along with enough enough rockets to bring them up from the surface so they don&rsquo;t die, costing your space agency precious points.</p><p>There are many other mission planning complexities: Ion Thrusters, which are not expended but take time to travel from one location to another; slingshot maneuvers to travel to the outer reaches of the solar system; one-way maneuvers; and more. But the basic concept I presented above is enough to move on.</p><div id=constraint-satisfaction-problems class=anchor>Constraint Satisfaction Problems></div><h1 class="relative group">Constraint Satisfaction Problems
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#constraint-satisfaction-problems aria-label=Anchor>#</a></span></h1><p>So how can Leaving Earth&rsquo;s mission planning be reduced to a <a href=https://en.wikipedia.org/wiki/Constraint_satisfaction_problem target=_blank>Constraint Satisfaction Problem</a> (CSP)?</p><p>Let&rsquo;s take the difficulty 5 maneuver from Earth to Suborbital Flight and rewrite it as a CSP. To simplify things, we&rsquo;ll assume that there are only Saturn and Soyuz rockets available.</p><figure><img class="my-0 rounded-md" srcset="/pages/leaving-earth/leavingearth_tabletop_hu9301295597b844342c6ee403c1c05714_430348_330x0_resize_q75_box.jpg 330w,
/pages/leaving-earth/leavingearth_tabletop_hu9301295597b844342c6ee403c1c05714_430348_660x0_resize_q75_box.jpg 660w,
/pages/leaving-earth/leavingearth_tabletop_hu9301295597b844342c6ee403c1c05714_430348_1024x0_resize_q75_box.jpg 1024w,
/pages/leaving-earth/leavingearth_tabletop_hu9301295597b844342c6ee403c1c05714_430348_1320x0_resize_q75_box.jpg 2x" src=/pages/leaving-earth/leavingearth_tabletop_hu9301295597b844342c6ee403c1c05714_430348_660x0_resize_q75_box.jpg alt><figcaption>The Leaving Earth map</figcaption></figure><p>The question we want to solve is how many Saturn and how many Soyuz rockets are needed to move a mass of, say, 1 from Earth to Suborbital. In other words, we want to find the values of two variables, <code>saturn</code> and <code>soyuz</code>, that are a solution to the following problem:</p><p>Both variables must be greater or equal to zero (we don&rsquo;t allow negative numbers of rockets):</p><ul><li><code>saturn ≥ 0</code></li><li><code>soyuz ≥ 0</code></li></ul><p>Our Leaving Earth formula <em>thrust required = mass × difficulty</em> needs to be rewritten slightly as <em>thrust produced ≥ mass × difficulty</em>; in other words, we need to make sure that the thrust produced by the Saturn and Soyuz rockets that we use is large enough.</p><p>First consider what we know:</p><ul><li>payload = 1</li><li>thrust produced = <code>saturn</code> × 200 + <code>soyuz</code> × 80</li><li>mass = <code>saturn</code> × 20 + <code>soyuz</code> × 9 + payload</li><li>difficulty = 5</li></ul><p>Then write this information as a third and final constraint:</p><ul><li><code>saturn × 200 + soyuz × 80 ≥ (saturn × 20 + soyuz × 9 + 1) × 5</code></li></ul><p>This problem is actually quite easy to solve: any positive values for <code>saturn</code> or <code>soyuz</code> will be a correct solution. But if the payload size increased from 1 to, say, 10, then the solutions are perhaps not so obvious.</p><div id=z3 class=anchor>z3></div><h2 class="relative group">z3
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#z3 aria-label=Anchor>#</a></span></h2><p>This is where a CSP solver comes in handy. z3 is a toolkit for solving CSPs with bindings for several languages, including Python, which is the language I&rsquo;ll be using here.</p><p>z3 will help find the right number of rockets to fit the Leaving Earth equation <em>thrust required = mass × difficulty</em>. In other words the formula is our constraint and the number of rockets are the variables that need to be solved for.</p><div id=solving-a-single-maneuver class=anchor>Solving a single maneuver></div><h3 class="relative group">Solving a single maneuver
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#solving-a-single-maneuver aria-label=Anchor>#</a></span></h3><p>Rewriting the CSP above in z3 would look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>z3</span> <span class=kn>import</span> <span class=n>solve</span><span class=p>,</span> <span class=n>Int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>saturn</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;saturn rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soyuz</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;soyuz rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>payload</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>thrust</span> <span class=o>=</span> <span class=n>saturn</span><span class=o>*</span><span class=mi>200</span> <span class=o>+</span> <span class=n>soyuz</span><span class=o>*</span><span class=mi>80</span>
</span></span><span class=line><span class=cl><span class=n>mass</span> <span class=o>=</span> <span class=n>saturn</span><span class=o>*</span><span class=mi>20</span> <span class=o>+</span> <span class=n>soyuz</span><span class=o>*</span><span class=mi>9</span> <span class=o>+</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl><span class=n>difficulty</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>solve</span><span class=p>(</span><span class=n>saturn</span><span class=o>&gt;=</span><span class=mi>0</span><span class=p>,</span> <span class=n>soyuz</span><span class=o>&gt;=</span><span class=mi>0</span><span class=p>,</span> <span class=n>thrust</span> <span class=o>&gt;=</span> <span class=n>mass</span> <span class=o>*</span> <span class=n>difficulty</span><span class=p>)</span>
</span></span></code></pre></div><p>z3 will return the following result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>saturn</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>soyuz</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>2</span><span class=p>]</span>
</span></span></code></pre></div><p>In other words, 2 Soyuz rockets can transport a payload of 10 to Suborbital Flight. This certainly is <em>a</em> solution, but is it the optimal solution? For this, we have to decide what defines optimal. Is it the number of rockets? The total mass of the rockets? Or is it the <em>cost</em> of the rockets used? If we are thinking about a game of Leaving Earth, it&rsquo;s probably the cost.</p><p>Let&rsquo;s rewrite the function but with a cost optimization and let&rsquo;s add all the remaining rockets in as variables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>z3</span> <span class=kn>import</span> <span class=n>Optimize</span><span class=p>,</span> <span class=n>Int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>saturn</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;saturn rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soyuz</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;soyuz rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>atlas</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;atlas rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>juno</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;juno rockets&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>payload</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>thrust</span> <span class=o>=</span> <span class=n>saturn</span><span class=o>*</span><span class=mi>200</span> <span class=o>+</span> <span class=n>soyuz</span><span class=o>*</span><span class=mi>80</span> <span class=o>+</span> <span class=n>atlas</span><span class=o>*</span><span class=mi>27</span> <span class=o>+</span> <span class=n>juno</span><span class=o>*</span><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=n>mass</span> <span class=o>=</span> <span class=n>saturn</span><span class=o>*</span><span class=mi>20</span> <span class=o>+</span> <span class=n>soyuz</span><span class=o>*</span><span class=mi>9</span> <span class=o>+</span> <span class=n>atlas</span><span class=o>*</span><span class=mi>4</span> <span class=o>+</span> <span class=n>juno</span><span class=o>*</span><span class=mi>1</span> <span class=o>+</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl><span class=n>difficulty</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cost</span> <span class=o>=</span> <span class=n>saturn</span><span class=o>*</span><span class=mi>15</span> <span class=o>+</span> <span class=n>soyuz</span><span class=o>*</span><span class=mi>8</span> <span class=o>+</span> <span class=n>atlas</span><span class=o>*</span><span class=mi>5</span> <span class=o>+</span> <span class=n>juno</span><span class=o>*</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>solver</span> <span class=o>=</span> <span class=n>Optimize</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>thrust</span> <span class=o>&gt;=</span> <span class=n>mass</span> <span class=o>*</span> <span class=n>difficulty</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>saturn</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>soyuz</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>atlas</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>juno</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span><span class=n>cost</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>check</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>model</span><span class=p>()</span>
</span></span></code></pre></div><p>And this returns:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>saturn</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>soyuz</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>atlas</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>juno</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>]</span>
</span></span></code></pre></div><p>And of course you can get a mix of rockets with the right conditions, such as by setting <code>payload</code> to <code>21</code>, giving:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>saturn</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>soyuz</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>atlas</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>juno</span> <span class=n>rockets</span> <span class=o>=</span> <span class=mi>0</span><span class=p>]</span>
</span></span></code></pre></div><div id=solving-longer-missions class=anchor>Solving longer missions></div><h3 class="relative group">Solving longer missions
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#solving-longer-missions aria-label=Anchor>#</a></span></h3><p>When it&rsquo;s just a single maneuver, the constraints end up being quite simple; however, missions in Leaving Earth inevitably have multiple steps. Fortunately, this is not difficult to express in z3. Let&rsquo;s take the mission from Earth Orbit to the Moon. We have a maneuver of difficulty 3, followed by a maneuver of difficulty 2.</p><div class=mermaid align=center>graph TD
A(Earth) -->|3| B(Suborbital Flight)
B -->|5| C(Earth Orbit)
A -->|8| C
C -->|3| D(Lunar Orbit)
D -->|2| E(Moon)</div><p>The key here is to express this mission <em>backwards</em>; in other words, we&rsquo;ll make sure we can travel from Lunar Orbit to the Moon first and then ensure we can travel from Earth Orbit to Lunar Orbit.</p><p>And crucially, the payload gets larger and larger as we move backwards in the mission by the number of rockets that <em>will be</em> expended in the future:</p><table><thead><tr><th>Maneuver</th><th>Maneuver</th><th>Difficulty</th><th>Payload</th></tr></thead><tbody><tr><td>0</td><td>Lunar Orbit to Moon</td><td>2</td><td>5</td></tr><tr><td>1</td><td>Earth Orbit to Lunar Orbit</td><td>3</td><td>5 + mass of rockets used in Stage 0</td></tr></tbody></table><p>In z3, this would be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>z3</span> <span class=kn>import</span> <span class=n>Optimize</span><span class=p>,</span> <span class=n>IntVector</span><span class=p>,</span> <span class=n>Int</span>
</span></span><span class=line><span class=cl><span class=n>solver</span> <span class=o>=</span> <span class=n>Optimize</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>maneuvers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=c1># reverse list of maneuvers to perform</span>
</span></span><span class=line><span class=cl><span class=n>payload</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>saturn</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;saturn rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>soyuz</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;soyuz rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>atlas</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;atlas rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>juno</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;juno rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cost</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># running total of the cost</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>difficulty</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>thrust</span> <span class=o>=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>200</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>80</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>27</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>4</span>
</span></span><span class=line><span class=cl>    <span class=n>thruster_mass</span> <span class=o>=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>20</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>9</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>4</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>mass</span> <span class=o>=</span> <span class=n>thruster_mass</span> <span class=o>+</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>thrust</span> <span class=o>&gt;=</span> <span class=n>mass</span> <span class=o>*</span> <span class=n>difficulty</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>cost</span> <span class=o>+=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>15</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>8</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>5</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span> <span class=o>+=</span> <span class=n>thruster_mass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span><span class=n>cost</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>check</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>model</span><span class=p>()</span>
</span></span></code></pre></div><p>Removing all the unused rockets, we are left with the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>atlas</span> <span class=n>rockets0</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>soyuz</span> <span class=n>rockets1</span> <span class=o>=</span> <span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></div><p>This is saying that for maneuver <code>0</code>, we need an Atlas and for maneuver <code>1</code>, we need a Soyuz. Remember that we planned this backwards, so <code>0</code> is the last maneuver (i.e. Lunar Orbit to the Moon) and <code>1</code> is the maneuver that came before it (i.e. Earth Obit to Lunar Orbit).</p><p>The amazing thing is that by simply changing the line <code>maneuvers = [2, 3]</code>, we can solve any one-way mission in Leaving Earth that uses expendable rockets.</p><p>Earth to the Moon? <code>maneuvers = [2, 3, 8]</code></p><p>Earth to the Moon with a two stage launch? <code>maneuvers = [2, 3, 5, 3]</code></p><p>Earth to Mercury with a two stage launch? <code>maneuvers = [2, 2, 5, 3, 5, 3]</code></p><div id=ion-thrusters class=anchor>Ion Thrusters></div><h3 class="relative group">Ion Thrusters
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ion-thrusters aria-label=Anchor>#</a></span></h3><p>Ion Thrusters work a little differently: they can&rsquo;t be used for maneuvers travelling to or from celestial bodies; they are not expended when they are used; they produce 5 thrust for every year the journey takes. As an example, if a spacecraft composed of a Probe (mass 1) and an Ion Thruster (mass 1) travels from Earth Orbit to Lunar Orbit, then the journey will take 2 years to complete. The same formula - <em>thrust required = mass × difficulty</em> - applies, giving (1+1) × 3 = 6. Ion Thrusters generate 5 thrust per year so one year of travel would only provide 5 thrust and we need 6, hence two years.</p><p>Since Ions are not expended, they are very efficient as long as you aren&rsquo;t in a hurry - remember this a space <em>race</em>.</p><p>Let&rsquo;s add support for Ion Thrusters to the code above. First we need to add the Ion Thrusters&rsquo; mass and cost <em>once</em> but add their thrust at each stage. Second, we need to introduce a new variable for the number of years each maneuver takes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>z3</span> <span class=kn>import</span> <span class=n>Optimize</span><span class=p>,</span> <span class=n>IntVector</span><span class=p>,</span> <span class=n>Int</span>
</span></span><span class=line><span class=cl><span class=n>solver</span> <span class=o>=</span> <span class=n>Optimize</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>maneuvers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=c1># reverse list of maneuvers to perform</span>
</span></span><span class=line><span class=cl><span class=n>payload</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>saturn</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;saturn rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>soyuz</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;soyuz rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>atlas</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;atlas rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>juno</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;juno rockets&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>ion</span> <span class=o>=</span> <span class=n>Int</span><span class=p>(</span><span class=s2>&#34;ion thrusters&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>year</span> <span class=o>=</span> <span class=n>IntVector</span><span class=p>(</span><span class=s2>&#34;years travelled&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>ion</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cost</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># running total of the cost</span>
</span></span><span class=line><span class=cl><span class=n>years</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># running total of journey time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>payload</span> <span class=o>+=</span> <span class=n>ion</span> <span class=o>*</span> <span class=mi>1</span> <span class=c1># add the weight of the ion thrusters to the payload once</span>
</span></span><span class=line><span class=cl><span class=n>cost</span> <span class=o>+=</span> <span class=n>ion</span> <span class=o>*</span> <span class=mi>10</span> <span class=c1># add the cost of the ion thrusters to the total once</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>difficulty</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>maneuvers</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>year</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>thrust</span> <span class=o>=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>200</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>80</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>27</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>4</span> <span class=o>+</span> <span class=n>ion</span><span class=o>*</span><span class=n>year</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>    <span class=n>thruster_mass</span> <span class=o>=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>20</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>9</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>4</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>mass</span> <span class=o>=</span> <span class=n>thruster_mass</span> <span class=o>+</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl>    <span class=n>solver</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>thrust</span> <span class=o>&gt;=</span> <span class=n>mass</span> <span class=o>*</span> <span class=n>difficulty</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>years</span> <span class=o>+=</span> <span class=n>year</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>cost</span> <span class=o>+=</span> <span class=n>saturn</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>15</span> <span class=o>+</span> <span class=n>soyuz</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>8</span> <span class=o>+</span> <span class=n>atlas</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>5</span> <span class=o>+</span> <span class=n>juno</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span> <span class=o>+=</span> <span class=n>thruster_mass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span><span class=n>cost</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>check</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>model</span><span class=p>()</span>
</span></span></code></pre></div><p>The code above is for a journey from Earth Orbit to Mercury Orbit. Because Ion Thrusters can&rsquo;t be used to reach space from Earth, the code would need to be more complex to support the full journey, but this is good enough for now.</p><table><thead><tr><th>Stage</th><th>Maneuver</th><th>Difficulty</th></tr></thead><tbody><tr><td>0</td><td>Mercury Fly-by to Mercury Orbit</td><td>2</td></tr><tr><td>1</td><td>Inner Planets Transfer to Mercury Fly-by</td><td>5</td></tr><tr><td>2</td><td>Earth Orbit to Inner Planets Transfer</td><td>3</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>ion</span> <span class=n>thrusters</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=n>years</span> <span class=n>travelled0</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=n>years</span> <span class=n>travelled1</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=n>years</span> <span class=n>travelled2</span> <span class=o>=</span> <span class=mi>4</span><span class=p>]</span>
</span></span></code></pre></div><p>For $10 in game money, a single Ion Thruster will carry a payload all the way to Mercury! The only problem is that it will take 16 years &mldr; but what if we ask z3 to optimize for the journey time?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span><span class=n>cost</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>solver</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span><span class=n>years</span><span class=p>)</span>
</span></span></code></pre></div><p>Now cost is still the most important factor but years will also be minimized and the new results are that the journey will take 13 years. You can also flip the order of the two minimize statements so that the critical factor is the journey time and cost is only of secondary importance!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=n>juno</span> <span class=n>rockets0</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>saturn</span> <span class=n>rockets1</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>saturn</span> <span class=n>rockets2</span> <span class=o>=</span> <span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></div><p>Now suddenly, z3 wants us to use expendable rockets fore each maneuver because they don&rsquo;t have the additional time cost of the Ion Thrusters.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> The monetary cost is significantly higher, however, at $35!</p><div id=leaving-earth-solver class=anchor>Leaving Earth Solver></div><h2 class="relative group">Leaving Earth Solver
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#leaving-earth-solver aria-label=Anchor>#</a></span></h2><p>I put all of this and more together into a Python package to solve many (but not all) Leaving Earth missions, including rules from Outer Planets and Stations. It&rsquo;s a command-line tool that works like this:</p><pre tabindex=0><code>Usage: les [OPTIONS] ORIGIN DESTINATION [PAYLOAD]

Options:
  --version                       Show the version and exit.
  -v, --verbose                   Verbose mode
  -j, --juno RANGE                Number of Juno rockets
  -a, --atlas RANGE               Number of Atlas rockets
  -s, --soyuz RANGE               Number of Soyuz rockets
  -p, --proton RANGE              Number of Proton rockets
  -n, --saturn RANGE              Number of Saturn rockets
  -i, --ion RANGE                 Number of Ion thrusters
  -c, --cost RANGE                Cost of mission
  -m, --minimize [time|cost|mass]
                                  Minimization goal
  --single-stage                  Check a single stage configuration for
                                  launches from Earth (by default only a two-
                                  stage configuration will be attempted)
  --aerobraking / --no-aerobraking
                                  Use aerobraking
  --rendezvous / --no-rendezvous  If rendezvous technology is available, Ion
                                  thrusters will be detached when no longer
                                  needed
  -t, --time RANGE                Number of time tokens
  -y, --year INTEGER RANGE        Year that journey starts  [1956&lt;=x&lt;=1986]
  --help                          Show this message and exit.
</code></pre><a class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700" href=https://github.com/bosth/les/ target=_blank role=button>Source code</a><div id=examples class=anchor>Examples></div><h3 class="relative group">Examples
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#examples aria-label=Anchor>#</a></span></h3><p>To find the optimal solution for a trip taking 1 mass from Earth Orbit (<code>Eo</code>) to the Moon (<code>L</code>):</p><pre tabindex=0><code>les Eo L
</code></pre><p>The results are a JSON description of the entire mission:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;mass&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cost&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;time&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;plan&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Earth orbit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Lunar fly-by&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Lunar fly-by&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Lunar orbit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Lunar orbit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Moon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><figure><img class="my-0 rounded-md" srcset="/pages/leaving-earth/lunar_hu0c8b55578a51c6342816710cae417331_159122_330x0_resize_q75_h2_box_2.webp 330w,
/pages/leaving-earth/lunar_hu0c8b55578a51c6342816710cae417331_159122_660x0_resize_q75_h2_box_2.webp 660w,
/pages/leaving-earth/lunar_hu0c8b55578a51c6342816710cae417331_159122_1024x0_resize_q75_h2_box_2.webp 1024w,
/pages/leaving-earth/lunar_hu0c8b55578a51c6342816710cae417331_159122_1320x0_resize_q75_h2_box_2.webp 2x" src=/pages/leaving-earth/lunar_hu0c8b55578a51c6342816710cae417331_159122_660x0_resize_q75_h2_box_2.webp alt><figcaption>This plan uses Lunar Fly-by because of the low difficulty maneuver from Earth Orbit</figcaption></figure><p>To find the optimal solution for a trip that taking 5 mass from Earth (<code>E</code>) to the Moon that uses no Saturn rockets, between 1 and 3 Soyuz rockets and where we are able to detach the Ion Thruster before landing on the Moon (this avoids moving unnecessary mass):</p><pre tabindex=0><code>les E L 5 --saturn 0 --soyuz 1-3 --rendezvous
</code></pre><p>To find the optimal solution for the fastest trip carrying 10 mass from Earth Orbit to Jupiter Fly-by (<code>Jfb</code>) that leaves in 1960.</p><pre tabindex=0><code>les Eo Jfb 10 --year 1960 --minimize time
</code></pre><p>Result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=mi>1960</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;end&#34;</span><span class=p>:</span> <span class=mi>1963</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;soyuz&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;ion&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;atlas&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;mass&#34;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cost&#34;</span><span class=p>:</span> <span class=mi>26</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;time&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;plan&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Earth orbit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Inner planets transfer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;soyuz&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;ion&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;aerobraking&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;year&#34;</span><span class=p>:</span> <span class=mi>1960</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;time&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>85</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;slingshot&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Inner planets transfer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Venus fly-by&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;atlas&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;ion&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;aerobraking&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;time&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;year&#34;</span><span class=p>:</span> <span class=mi>1961</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>36</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;slingshot&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;origin&#34;</span><span class=p>:</span> <span class=s2>&#34;Venus fly-by&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;destination&#34;</span><span class=p>:</span> <span class=s2>&#34;Jupiter fly-by&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;difficulty&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;components&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;juno&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;ion&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;aerobraking&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;year&#34;</span><span class=p>:</span> <span class=mi>1962</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;time&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;thrust&#34;</span><span class=p>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;slingshot&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div id=how-it-works class=anchor>How it works></div><h3 class="relative group">How it works
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-it-works aria-label=Anchor>#</a></span></h3><p>The core concept is identical to what I described above but <code>les</code> also finds the optimal paths from the origin to the destination. In most cases there are multiple paths between two points and the optimal path depends on a number of external factors. Even travelling to the Moon from Earth presents many options:</p><div class=mermaid align=center>graph TD
E((Earth)) -->|3| ESo(Suborbital Flight)
ESo -->|5| Eo(Earth Orbit)
E -->|8| Eo
Eo -->|3| Lo(Lunar Orbit)
Lo -->|2| L((fa:fa-ban Moon))
Eo -->|1| Lfb(Lunar Fly-by)
Lfb -->|2| Lo
Lfb -->|4| L</div><p>By default, <code>les</code> will try to predict a few plausible paths and solve for each of those, selecting the best solution at the end.</p><p><code>les</code> is aware of which maneuvers support Ion Thrusters and can detatch these opportunistically when they will no longer be needed to complete a mission. Conversely, it will carry unused Ions from one location to the next if they will be used at a future stage.</p><p>It also can make use of aerobraking, slingshot maneuvers and Proton rockets from the expansions. It doesn&rsquo;t support the reusable shuttles, however, and it won&rsquo;t increase or decrease the difficulty of maneuvers to change travel times. The biggest missing feature, however, is probably not being able to plan return missions (e.g. going to the Moon and back again).</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Leaving Earth players will note that some maneuvers take a minimum amount of time even with rockets, but I am ignoring that for the moment.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></br></br></div><script>var oid="views_pages/leaving-earth/index.md",oid_likes="likes_pages/leaving-earth/index.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"></footer></article><div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.2166d3adac1679c00a75161830ab5725d3efc0e3d3f8c2453fb01d0907948436c25f0f8a7ad824322fa22f3f9c85fd4d0a1d5c856f53b862157da25a57dc3d52.js integrity="sha512-IWbTrawWecAKdRYYMKtXJdPvwOPT+MJFP7AdCQeUhDbCXw+KetgkMi+iLz+chf1NCh1chW9TuGIVfaJaV9w9Ug=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://bosth.github.io style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>